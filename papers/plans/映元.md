---
use-value: 3
---
#### 问题

在许多语言中，不同位置的相同数据之间的转换/同步总是一个麻烦的操作（e.g. 从数据库/配置文件提取数据），而且常常因为意外的问题出现各种错误（e.g. 无网络连接/文件未找到），新的程序项目往往需要在这类问题上耗费巨大时间才能开始真正的逻辑开发

#### 目标

在语言级别实现类似于Vue等框架的双向绑定类似的功能，下至文件读取/数字变量映射，上至自动界面映射/自动网络数据映射

#### 使用压力

高度优化：

简化一般的文件读取/写入操作不说，也可以通过这个设计构建自动化的数据映射链路，宏观上甚至可以用来构建自动的数据同步服务

#### 实现压力

很困难：

在简单实现上，可以通过监听回调或一些传统手段实现，但无法利用其性能/空间优势

而在更高阶的实现上，则相当于是一个自动化的代码生成器，自然变得很困难

#### 设计压力

很困难：

因为与之牵扯的系统太多了，设计起来相当困难

#### 性能/空间压力

较高优化：

通过在语言级别上支持数据间的双向同步，使得一些数据可以按需建立/懒加载，因此可以节省很多性能/空间消耗，另外某些双向同步被频繁触发的问题也可以通过[[分压器]]缓解

#### 代码用例

```js

// 映射文件到变量
const options = Mapper().file("options.data")

// 映射网络数据到变量
const books = Mapper().file("https://xxx.xxx/books.data")

// 结合贪婪尝试，优先映射在线数据，如果失败则转为使用本地数据
const data = Mapper()
    .file("https://xxx.xxx/online.data")
    .file("offline.data")

// 通过映元下载文件
Mapper().file("https://xxx.xxx/list.txt").file("list.txt").sync()

// 映射变量
const a = 1
const b = Mapper(a + 2)

```

[[贪婪化]]
