---
use-value: 0
---
#### 问题

目前大多数程序都不会对自己占用的程序内存进行优先级排序，当系统内存不够需要释放内存时只能关闭整个程序

#### 目标

对程序占用的内存进行优先度分级，从而实现在内存不足时从低优先级的区域开始按需释放

#### 使用压力

无压力：

当通过[[映元]]访问需要的数据时，默认按照访问频率自动设置优先级，也可以手动设置

通过 FFI 占用内存时，锁定到最高优先级，不允许自动释放

#### 实现压力

困难：

因为涉及到多个控制系统（[[混合式内存分析、回收]]/[[实时性能分析]]/[[逻辑分析]]）

#### 设计压力

困难：

原因同实现

#### 性能/空间压力

较高压力：

要实现自动优先级设置至少需要每映元一个时间戳的额外空间，同时因为优先级本身需要存储所以也固定需要一个浮点的空间

要实现自动优先级设置需要每次映元访问都执行一次频率计算，每次开销很低，但因为映元的访问很频繁所以总体开销会有点高，这点可以通过[[分压器]]和[[自动优化档案]]来缓解

#### 代码用例

```js

// 无用例

```
